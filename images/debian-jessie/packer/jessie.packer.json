{
    "variables": {
        "source_image": "unknown",
        "image_name": "unknown"
    },
    "builders": [
        {
            "type": "openstack",
            "ssh_username": "cloud",
            "image_name": "{{ user `image_name` }}",
            "source_image": "{{ user `source_image` }}",
            "use_floating_ip": "true",
            "floating_ip_pool": "6ea98324-0f14-49f6-97c0-885d1b8dc517",
            "security_groups": ["PING_SSH"],
            "networks": ["a8816f03-cace-4c39-904e-d3fafdbfbe86"],
            "flavor": "16"
        }
    ],

    "provisioners": [
        {
            "type": "shell",
            "inline": [
                "sudo apt-get update",
                "sudo apt-get upgrade -y",
                "sudo apt-get install aptitude git python-dev python-pip -y",
                "sudo pip install ansible"
            ]
        },
        {
            "type": "ansible-local",
            "playbook_dir": "../ansible",
            "playbook_file": "../ansible/jessie-bootstrap.yml",
            "inventory_file": "../ansible/inventory"
        }
    ]
}
